# ๐จ Diagrama Visual de la Arquitectura

## ๐๏ธ Vista General del Sistema

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        CLIENTE (React + TS)                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโ                โ
โ  โ    CORE    โ  โ  FEATURES  โ  โ   SHARED   โ                โ
โ  โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโ                โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ HTTP/REST API
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      SERVIDOR (Node + TS)                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ        โ
โ  โ   DOMAIN    โ  โ INFRASTRUCTURE   โ  โ   SHARED    โ        โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ        โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                        โโโโโโโโโโโโ
                        โ MongoDB  โ
                        โโโโโโโโโโโโ
```

---

## ๐ฑ Arquitectura del Cliente (Frontend)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                              CLIENTE                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ CORE (Infraestructura Global)                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                        โ
โ  CONFIG                   SERVICES                  PROVIDERS          โ
โ  โโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโ    โ
โ  โ api.config   โ        โ http-client  โ        โ AppProviders โ    โ
โ  โ routes.configโ        โ api-error    โ        โ AuthProvider โ    โ
โ  โ constants    โ        โ   handler    โ        โ QueryProviderโ    โ
โ  โโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโ    โ
โ                                                                        โ
โ  ROUTER                                                                โ
โ  โโโโโโโโโโโโโโโโ                                                     โ
โ  โ AppRouter    โ                                                     โ
โ  โ PrivateRoute โ                                                     โ
โ  โโโโโโโโโโโโโโโโ                                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ FEATURES (Mรณdulos por Dominio)                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                        โ
โ  AUTH              SURVEYS            RESPONSES          ANALYTICS     โ
โ  โโโโโโโโโโโโ     โโโโโโโโโโโโ      โโโโโโโโโโโโ      โโโโโโโโโโโโ  โ
โ  โ Login    โ     โ List     โ      โ Dynamic  โ      โ Metrics  โ  โ
โ  โ Register โ     โ Create   โ      โ  Survey  โ      โ Charts   โ  โ
โ  โโโโโโโโโโโโ     โ Edit     โ      โ ThankYou โ      โโโโโโโโโโโโ  โ
โ                    โ Detail   โ      โโโโโโโโโโโโ                     โ
โ  Cada feature      โโโโโโโโโโโโ                                       โ
โ  contiene:                                                             โ
โ  โข components/                                                         โ
โ  โข hooks/                 ADMIN              USER                      โ
โ  โข services/             โโโโโโโโโโโโ      โโโโโโโโโโโโ               โ
โ  โข types/                โ Home     โ      โ Home     โ               โ
โ  โข pages/                โ Sidebar  โ      โ Header   โ               โ
โ                          โโโโโโโโโโโโ      โโโโโโโโโโโโ               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ SHARED (Recursos Compartidos)                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                        โ
โ  COMPONENTS/UI         COMPONENTS/COMMON       COMPONENTS/LAYOUT      โ
โ  โโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโ        โ
โ  โ Button       โ     โ Loading      โ       โ Header       โ        โ
โ  โ Card         โ     โ Error        โ       โ Footer       โ        โ
โ  โ Input        โ     โ AuthGuard    โ       โ Container    โ        โ
โ  โ Dialog       โ     โโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโ        โ
โ  โ ...shadcn/ui โ                                                     โ
โ  โโโโโโโโโโโโโโโโ                                                     โ
โ                                                                        โ
โ  HOOKS              TYPES                  UTILS                      โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ           โ
โ  โ useToast     โ  โ common.types โ      โ formatters   โ           โ
โ  โ useDebounce  โ  โ api.types    โ      โ validators   โ           โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ฅ๏ธ Arquitectura del Servidor (Backend)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                              SERVIDOR                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ HTTP LAYER (Entrada)                                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                        โ
โ  ROUTES            MIDDLEWARES           VALIDATORS                    โ
โ  โโโโโโโโโโโโ     โโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโ              โ
โ  โ encuestasโ     โ error        โ     โ encuesta     โ              โ
โ  โ respuestasโ    โ auth         โ     โ respuesta    โ              โ
โ  โ analyticsโ     โ validation   โ     โ usuario      โ              โ
โ  โ usuarios โ     โ logger       โ     โโโโโโโโโโโโโโโโ              โ
โ  โโโโโโโโโโโโ     โโโโโโโโโโโโโโโโ                                    โ
โ       โ                  โ                      โ                      โ
โ  CONTROLLERS                                                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โ  โ EncuestaController                                      โ           โ
โ  โ RespuestaController                                     โ           โ
โ  โ AnalyticsController                                     โ           โ
โ  โ UsuarioController                                       โ           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ DOMAIN LAYER (Lรณgica de Negocio)                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                        โ
โ  SERVICES (Business Logic)                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โ  โ โข EncuestaService                                       โ           โ
โ  โ   - getAllEncuestas()                                   โ           โ
โ  โ   - createEncuesta()                                    โ           โ
โ  โ   - updateEstadoEncuesta()                              โ           โ
โ  โ   - validaciones de negocio                             โ           โ
โ  โ                                                          โ           โ
โ  โ โข RespuestaService                                      โ           โ
โ  โ โข AnalyticsService                                      โ           โ
โ  โ โข UsuarioService                                        โ           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โ                          โ usa                                         โ
โ  INTERFACES (Contratos)                                                โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โ  โ IEncuestaRepository                                     โ           โ
โ  โ IRespuestaRepository                                    โ           โ
โ  โ IUsuarioRepository                                      โ           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โ                                                                        โ
โ  ENTITIES (Modelo de Dominio)                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โ  โ EncuestaEntity                                          โ           โ
โ  โ โข propiedades privadas                                  โ           โ
โ  โ โข mรฉtodos de dominio (activar, desactivar, etc)         โ           โ
โ  โ โข validaciones de negocio                               โ           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ INFRASTRUCTURE LAYER (Implementaciรณn)                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                        โ
โ  REPOSITORIES (Implementaciรณn de Interfaces)                           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โ  โ EncuestaRepository implements IEncuestaRepository       โ           โ
โ  โ โข findAll()                                             โ           โ
โ  โ โข findById()                                            โ           โ
โ  โ โข create()                                              โ           โ
โ  โ โข update()                                              โ           โ
โ  โ โข delete()                                              โ           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โ                          โ usa                                         โ
โ  MODELS (Mongoose Schemas)                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โ  โ EncuestaModel (Schema + Model de Mongoose)             โ           โ
โ  โ RespuestaModel                                          โ           โ
โ  โ UsuarioModel                                            โ           โ
โ  โ MetricaModel                                            โ           โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                    โ
                            โโโโโโโโโโโโโโโโ
                            โ   MongoDB    โ
                            โโโโโโโโโโโโโโโโ
```

---

## ๐ Flujo de Datos: Crear Encuesta

### Cliente โ Servidor โ Base de Datos

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 1. USER INTERFACE                                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   CreateSurveyPage.tsx                                           โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ โข Formulario de creaciรณn                  โ                 โ
โ   โ โข Validaciones de UI                      โ                 โ
โ   โ โข onClick โ createMutation.mutate(data)   โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 2. HOOK LAYER                                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   useSurveyMutations.ts                                          โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ const createMutation = useMutation({      โ                 โ
โ   โ   mutationFn: surveyService.createSurvey  โ                 โ
โ   โ })                                        โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 3. SERVICE LAYER                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   surveyService.ts                                               โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ async createSurvey(data) {                โ                 โ
โ   โ   this.validateSurveyData(data)           โ โ Validaciรณn    โ
โ   โ   return repository.create(data)          โ                 โ
โ   โ }                                         โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 4. REPOSITORY LAYER                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   surveyRepository.ts                                            โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ async create(data) {                      โ                 โ
โ   โ   return httpClient.post('/encuestas', data)                โ
โ   โ }                                         โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 5. HTTP CLIENT                                                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   http-client.ts                                                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ async post(endpoint, data) {              โ                 โ
โ   โ   โข Agrega headers                        โ                 โ
โ   โ   โข Agrega auth token                     โ                 โ
โ   โ   โข Maneja timeout                        โ                 โ
โ   โ   โข fetch(url, config)                    โ                 โ
โ   โ }                                         โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ HTTP POST                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                          โ
                          โ HTTP/REST API
                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 6. ROUTE                                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   encuestas.routes.ts                                            โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ router.post('/',                          โ                 โ
โ   โ   validateEncuesta, โ Middleware          โ                 โ
โ   โ   encuestaController.create               โ                 โ
โ   โ )                                         โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 7. CONTROLLER                                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   EncuestaController.ts                                          โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ async create(req, res, next) {            โ                 โ
โ   โ   try {                                   โ                 โ
โ   โ     const result =                        โ                 โ
โ   โ       await encuestaService.createEncuesta(req.body)        โ
โ   โ     res.status(201).json(result)          โ                 โ
โ   โ   } catch(e) { next(e) }                  โ                 โ
โ   โ }                                         โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 8. DOMAIN SERVICE                                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   EncuestaService.ts                                             โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ async createEncuesta(data) {              โ                 โ
โ   โ   this.validateEncuestaData(data) โ Lรณgica de negocio       โ
โ   โ   const entity = new EncuestaEntity(data) โ                 โ
โ   โ   return repository.create(data)          โ                 โ
โ   โ }                                         โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 9. REPOSITORY                                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   EncuestaRepository.ts                                          โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ async create(data) {                      โ                 โ
โ   โ   const encuesta = new EncuestaModel(data)โ                 โ
โ   โ   return encuesta.save()                  โ                 โ
โ   โ }                                         โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ 10. DATABASE                                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ   MongoDB                                                        โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ   โ Collection: encuestas                     โ                 โ
โ   โ โข Documento insertado                     โ                 โ
โ   โ โข Retorna documento con _id               โ                 โ
โ   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ                 โ
โ                        โ                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                          โ
         โ โ โ โ โ โ โ โ โ โ (Response flows back)
```

---

## ๐ฏ Separaciรณn de Responsabilidades (SOLID)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    RESPONSABILIDADES                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

UI Components          โ Presentaciรณn y UX
    โ
Hooks                  โ Estado y side effects
    โ
Services               โ Lรณgica de negocio (cliente)
    โ
Repositories           โ Acceso a datos (cliente)
    โ
HTTP Client            โ Comunicaciรณn HTTP
    โ
โโโโโโโโโโโโโโโโโโโโโโโ API โโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ
Routes                 โ Routing y middleware
    โ
Controllers            โ Manejo de HTTP request/response
    โ
Domain Services        โ Lรณgica de negocio (servidor)
    โ
Repositories           โ Acceso a datos (servidor)
    โ
Models                 โ Esquemas y persistencia
    โ
Database               โ Almacenamiento
```

---

## ๐ฆ Modularidad por Features

```
FEATURES (Independientes y Autocontenidos)

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ FEATURE: Auth                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โข components/    LoginForm, RegisterForm                  โ
โ โข hooks/         useAuth, useLogin                        โ
โ โข services/      authService                              โ
โ โข types/         User, LoginCredentials                   โ
โ โข pages/         LoginPage                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ FEATURE: Surveys (Admin)                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โข components/    SurveyCard, SurveyForm, QuestionBuilder  โ
โ โข hooks/         useSurveys, useSurveyMutations           โ
โ โข services/      surveyService, surveyRepository          โ
โ โข types/         Survey, CreateSurveyDTO                  โ
โ โข pages/         SurveyListPage, CreateSurveyPage         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ FEATURE: Responses (User)                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โข components/    QuestionDisplay, QuestionInput           โ
โ โข hooks/         useResponseForm                          โ
โ โข services/      responseService                          โ
โ โข types/         Response, ResponseItem                   โ
โ โข pages/         DynamicSurveyPage, ThankYouPage          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ FEATURE: Analytics (Admin)                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โข components/    MetricsCard, ResponseChart               โ
โ โข hooks/         useMetrics                               โ
โ โข services/      analyticsService                         โ
โ โข types/         MetricsData, MetricsSummary              โ
โ โข pages/         MetricsPage                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Principios SOLID Aplicados

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ S - Single Responsibility Principle                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ Cada clase/mรณdulo tiene UNA sola responsabilidad            โ
โ                                                                โ
โ SurveyService      โ Solo lรณgica de negocio de encuestas      โ
โ SurveyRepository   โ Solo acceso a datos de encuestas         โ
โ HttpClient         โ Solo comunicaciรณn HTTP                   โ
โ EncuestaController โ Solo manejo de requests HTTP             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ O - Open/Closed Principle                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ Abierto para extensiรณn, cerrado para modificaciรณn           โ
โ                                                                โ
โ Nuevo tipo de pregunta โ Extender QuestionType               โ
โ Nueva feature โ Agregar carpeta en features/                 โ
โ Nuevo servicio โ Implementar interface sin modificar base    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ L - Liskov Substitution Principle                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ Interfaces intercambiables                                  โ
โ                                                                โ
โ IEncuestaRepository โ EncuestaRepository (Mongoose)           โ
โ                    โ EncuestaRepositoryMock (Testing)         โ
โ Cualquier implementaciรณn cumple el contrato                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ I - Interface Segregation Principle                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ Interfaces especรญficas vs generales                         โ
โ                                                                โ
โ IEncuestaRepository โ Mรฉtodos especรญficos de encuesta         โ
โ IRespuestaRepository โ Mรฉtodos especรญficos de respuesta       โ
โ No una gran IRepository con todos los mรฉtodos                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ D - Dependency Inversion Principle                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โ Depender de abstracciones, no de implementaciones           โ
โ                                                                โ
โ EncuestaService(repository: IEncuestaRepository)              โ
โ                         โ                                      โ
โ                 Depende de interfaz                            โ
โ                                                                โ
โ new EncuestaService(new EncuestaRepository())                 โ
โ                          โ                                     โ
โ                 Inyecciรณn de dependencia                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

Este diagrama visual te ayudarรก a entender mejor cรณmo se organizan y relacionan todos los componentes de la nueva arquitectura. ๐จ
